
/* Copyright (c) 1997-2017 Miller Puckette and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#include "m_pd.h"
#include "m_core.h"
#include "s_system.h"
#include "g_graphics.h"

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

static t_pathlist *searchPath;     /* Shared. */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void searchpath_appendPath (char *filepath)
{
    searchPath = pathlist_newAppend (searchPath, filepath);
}

void searchpath_setEncoded (int argc, t_atom *argv)
{
    int i;
    
    pathlist_free (searchPath);
    
    searchPath = NULL;
    
    for (i = 0; i < argc; i++) {
    //
    t_symbol *path = symbol_decode (atom_getSymbolAtIndex (i, argc, argv));
        
    searchPath = pathlist_newAppend (searchPath, path->s_name);
    //
    }
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

t_pathlist *searchpath_get (void)
{
    return searchPath;
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void searchpath_release (void)
{
    pathlist_free (searchPath);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
