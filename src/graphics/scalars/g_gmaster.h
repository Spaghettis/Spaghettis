
/* Copyright (c) 1997-2019 Miller Puckette and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#ifndef __g_gmaster_h_
#define __g_gmaster_h_

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

/* Handle the case when a scalar is deleted while pointers remain. */
/* A manager is created that count pointers to scalars owned by a master. */
/* The pointer can ask the manager about validity of the master. */
/* The master invalidates all pointers if any owned object is deleted. */
/* The manager is freed once the master and all the pointers are freed. */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

t_gmaster   *gmaster_createWithGlist        (t_glist *glist);
t_gmaster   *gmaster_createWithArray        (t_array *array);

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void        gmaster_reset                   (t_gmaster *master);

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#endif // __g_gmaster_h_
