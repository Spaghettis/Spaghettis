
/* Copyright (c) 1997-2018 Miller Puckette and others. */

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#include "m_spaghettis.h"

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#if PD_WITH_BELLE

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#include "m_core.h"
#include "x_mica.hpp"

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

static t_class *micaspell_class;         /* Shared. */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

typedef struct _micaspell {
    t_object            x_obj;              /* Must be the first. */
    mica::MIR::Spell    x_spell;
    t_outlet            *x_outlet;
    } t_micaspell;

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

static void micaspell_list (t_micaspell *x, t_symbol *s, int argc, t_atom *argv)
{

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

static void micaspell_key (t_micaspell *x, t_symbol *s, int argc, t_atom *argv)
{

}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void *micaspell_new (t_symbol *s, int argc, t_atom *argv)
{
    t_micaspell *x = (t_micaspell *)pd_new (micaspell_class);
    
    try { new (x) t_micaspell; } catch (...) { PD_BUG; }
    
    x->x_outlet = outlet_newList (cast_object (x));
    
    if (argc) { warning_unusedArguments (s, argc, argv); }
    
    return x;
}

static void micaspell_free (t_micaspell *x)
{
    x->~t_micaspell();
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

void micaspell_setup (void)
{
    t_class *c = NULL;
    
    c = class_new (sym_mica__space__spell,
            (t_newmethod)micaspell_new,
            (t_method)micaspell_free,
            sizeof (t_micaspell),
            CLASS_DEFAULT,
            A_GIMME,
            A_NULL);
    
    class_addList (c, (t_method)micaspell_list);
    
    class_addMethod (c, (t_method)micaspell_key, sym_key, A_GIMME, A_NULL);
    
    class_setHelpName (c, sym_mica);
    
    micaspell_class = c;
}

void micaspell_destroy (void)
{
    class_free (micaspell_class);
}

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#else

void micaspell_setup (void)
{
}

void micaspell_destroy (void)
{
}

#endif // PD_WITH_BELLE

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

