
/* 
    Copyright (c) 2014, Nicolas Danet, < nicolas.danet@free.fr >. 
*/

/* < http://opensource.org/licenses/MIT > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#ifndef PIZ_DEFINE_H
#define PIZ_DEFINE_H

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#if defined ( LINUX ) || defined ( __linux__ )
    #define PIZ_LINUX                   1
#elif defined ( __APPLE__ )
    #define PIZ_APPLE                   1
#endif

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#if defined ( __LP64__ ) || defined ( _LP64 )
    #define PIZ_64BIT                   1
    #define PIZ_LP64                    1
    #define PIZ_MERSENNE_TWISTER_64     1
#else
    #define PIZ_32BIT                   1
    #define PIZ_ILP32                   1
    #define PIZ_MERSENNE_TWISTER_32     1
#endif

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#if defined ( __GNUC__ ) || defined ( __clang__ )
    #define PIZ_CONSTRUCTOR             1
#else
    #error "Unsupported compiler!"
#endif

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#if PIZ_APPLE

#include "Availability.h"

#if __MAC_OS_X_VERSION_MAX_ALLOWED >= 101200

#define PIZ_OS_SIERRA                   1

#endif

#endif

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#if PIZ_LINUX
    #define PIZ_ATOMIC_WITH_POSIX       1
#endif

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

/* Avoid deprecated using gcc atomic builtins. */

#if PIZ_APPLE
#if PIZ_OS_SIERRA
    #define PIZ_ATOMIC_WITH_POSIX       1
#else
    #define PIZ_ATOMIC_WITH_MAC         1
#endif
#endif

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#if PIZ_LINUX
#else
#if PIZ_APPLE
#else
    #error "Unknown platform!"
#endif
#endif

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#if PIZ_64BIT
#else
#if PIZ_32BIT
#else
    #error "Unknown architecture!"
#endif
#endif

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#define PIZ_MAX(a,b)                ((a)>(b)?(a):(b))
#define PIZ_MIN(a,b)                ((a)<(b)?(a):(b))

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
#endif // PIZ_DEFINE_H
