
/* 
    Copyright (c) 1997-2015 Miller Puckette and others.
*/

/* < https://opensource.org/licenses/BSD-3-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#include "m_pd.h"
#include "m_core.h"
#include "m_macros.h"
#include "s_system.h"

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#if PD_MSVC

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{ 
    __try {
        main_entry (__argc, __argv);
    }
    __finally { }
    
    return 0;
}

#else

int main (int argc, char **argv)
{
    priority_abortIfRoot ();
    
    return (main_entry (argc, argv));
}

#endif // PD_MSVC

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
