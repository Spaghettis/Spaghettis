
/* 
    Copyright (c) 2007-2013 William Andrew Burnson.
    Copyright (c) 2013-2018 Nicolas Danet.
    
*/

/* < http://opensource.org/licenses/BSD-2-Clause > */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

#ifndef BELLE_CORE_RASTER_HPP
#define BELLE_CORE_RASTER_HPP

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

/* A state for colors and line width. */

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

namespace belle {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

class Raster {

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    Raster() : fill_ (Colors::empty()), stroke_ (Colors::empty()), width_ (0.0) 
    {
    }

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

#if PRIM_CPP11

public:
    Raster (const Raster&) = default;
    Raster (Raster&&) = default;
    Raster& operator = (const Raster&) = default;
    Raster& operator = (Raster&&) = default;

#endif

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    String asPDFString() const
    {
        String s;
        
        s << Tab;
        s << getStrokeColor().getRed();
        s << " " << getStrokeColor().getGreen();
        s << " " << getStrokeColor().getBlue();
        s << " " << "SC" << newLine;
      
        s << Tab;
        s << getFillColor().getRed();
        s << " " << getFillColor().getGreen();
        s << " " << getFillColor().getBlue();
        s << " " << "sc" << newLine;
        
        if (getWidth() > 0.0) { s << Tab << getWidth(); s << " w" << newLine; }

        return s;
    }

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    Color getFillColor() const
    {
        return fill_;
    }
    
    Color getStrokeColor() const
    {   
        return stroke_;
    }
    
    double getWidth() const
    {
        return width_;
    }
    
// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
// MARK: -

public:
    Raster& setFillColor (Color color)
    {
        fill_ = color; return *this;
    }
    
    Raster& setStrokeColor (Color color)
    {   
        stroke_ = color; return *this;
    }
    
    Raster& setWidth (double width)
    {
        width_ = width; return *this;
    }
    
private:
    Color fill_;
    Color stroke_;
    double width_;

private:
    PRIM_LEAK_DETECTOR (Raster)
};
    
// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------

} // namespace belle

// -----------------------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------------------
#endif // BELLE_CORE_RASTER_HPP
