#N canvas 347 90 584 577 12;
#X obj 36 480 output~;
#N canvas 163 357 780 106 more 0;
#X text 12 12 First you need to estimate the background noise spectrum.;
#X text 12 60 Then \, apply this mask to clean the background noise out of a signal.;
#X f 69;
#X text 12 36 It is done by a moving average of the power (of each FFT bin) on a given amount of time.;
#X f 89;
#X coords 0 0 1 1 250 175 0 0 0;
#X restore 168 396 pd more;
#X obj 12 12 cnv 15 250 45 empty empty empty 0 -7 0 10 #cccccc #000000;
#X obj -60 12 freeze;
#X text 24 24 denoiser;
#X text 12 72 Attempts to scrub the noise floor from a sample.;
#N canvas 518 208 753 316 hann 0;
#X obj 36 264 tabwrite \$0-hann;
#X obj 36 24 loadbang;
#X obj 36 132 t f f;
#N canvas 0 22 500 350 \$0-hann 0;
#X array \$0-hann 1024 float 2;
#X coords 0 1 1024 0 250 175 1 0 0;
#X restore 468 72 graph \$0-hann;
#X obj 36 60 bng 15 250 50 0 empty empty empty 17 7 0 10 #ffffff #000000 #000000;
#X obj 36 96 uzi 1024;
#X obj 144 192 expr (-cos(($f1/512)*pi)/2)+0.5;
#X connect 1 0 4 0;
#X connect 2 0 6 0;
#X connect 2 1 0 1;
#X connect 4 0 5 0;
#X connect 5 2 2 0;
#X connect 6 0 0 0;
#X coords 0 0 1 1 250 175 0 0 0;
#X restore 168 420 pd hann;
#N canvas 121 45 510 621 fft 0;
#X obj 36 516 *~;
#X obj 204 240 *~;
#X obj 36 96 *~;
#X obj 96 408 *~;
#X obj 36 24 inlet~;
#X obj 36 408 *~;
#X obj 36 144 rfft~;
#X f 7;
#X obj 36 444 rifft~;
#X obj 36 564 outlet~;
#X obj 156 240 *~;
#X obj 156 276 +~;
#X obj 312 564 block~ 1024 4;
#X obj 84 60 tabreceive~ \$0-hann;
#X obj 72 480 tabreceive~ \$0-hann;
#X obj 312 24 inlet;
#X obj 432 24 inlet;
#N canvas 453 53 389 510 read 0;
#X obj 132 192 *~;
#X obj 36 348 /~;
#X obj 36 264 -~;
#X obj 36 300 max~ 0;
#X obj 192 132 tabreceive~ \$0-mask;
#X obj 108 300 +~ 1e-20;
#X obj 36 420 /~ 1536;
#X obj 36 384 sqrt~;
#X obj 36 24 inlet~;
#X obj 36 456 outlet~;
#X obj 120 24 inlet;
#X connect 0 0 2 1;
#X connect 1 0 7 0;
#X connect 2 0 3 0;
#X connect 3 0 1 0;
#X connect 4 0 0 0;
#X connect 5 0 1 1;
#X connect 6 0 9 0;
#X connect 7 0 6 0;
#X connect 8 0 2 0;
#X connect 8 0 5 0;
#X connect 10 0 0 1;
#X coords 0 0 1 1 250 175 0 0 0;
#X restore 156 336 pd read;
#N canvas 720 71 419 364 average 0;
#X obj 36 24 inlet~;
#X obj 36 120 -~;
#X obj 108 216 *~;
#X f 3;
#X obj 36 264 +~;
#X obj 108 72 tabreceive~ \$0-mask;
#X obj 36 312 tabsend~ \$0-mask;
#X obj 300 24 inlet;
#N canvas 288 94 280 435 weight 0;
#X obj 36 24 bang~;
#X obj 36 276 counter 346;
#X obj 36 312 expr 1/$f1;
#X obj 144 24 inlet;
#X obj 36 384 outlet;
#X obj 36 144 spigot;
#X obj 144 72 t 1 reset;
#X obj 144 312 t 0 0;
#X f 5;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 1 1 7 0;
#X connect 2 0 4 0;
#X connect 3 0 6 0;
#X connect 5 0 1 0;
#X connect 6 0 5 1;
#X connect 6 1 1 0;
#X connect 7 0 4 0;
#X connect 7 1 5 1;
#X coords 0 0 1 1 250 175 0 0 0;
#X restore 300 108 pd weight;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 1;
#X connect 3 0 5 0;
#X connect 4 0 1 1;
#X connect 4 0 3 0;
#X connect 6 0 7 0;
#X connect 7 0 2 1;
#X coords 0 0 1 1 250 175 0 0 0;
#X restore 252 336 pd average;
#X connect 0 0 8 0;
#X connect 1 0 10 1;
#X connect 2 0 6 0;
#X connect 3 0 7 1;
#X connect 4 0 2 0;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 6 0 9 0;
#X connect 6 0 9 1;
#X connect 6 1 3 0;
#X connect 6 1 1 0;
#X connect 6 1 1 1;
#X connect 7 0 0 0;
#X connect 9 0 10 0;
#X connect 10 0 17 0;
#X connect 10 0 16 0;
#X connect 12 0 2 1;
#X connect 13 0 0 1;
#X connect 14 0 16 1;
#X connect 15 0 17 1;
#X connect 16 0 3 1;
#X connect 16 0 5 1;
#X coords 0 0 1 1 250 175 0 0 0;
#X restore 36 420 pd fft;
#N canvas 122 77 503 338 signal 0;
#X obj 36 168 *~;
#X obj 156 168 *~;
#X obj 36 24 noise~;
#X obj 396 24 inlet;
#X obj 264 24 inlet;
#X obj 36 276 outlet~;
#X obj 36 240 hip~ 5;
#X obj 36 60 bp~ 10000 3;
#X obj 396 60 dbtoamp;
#X obj 264 60 dbtoamp;
#N canvas 599 84 642 421 play 0;
#X obj 36 300 +~ 1;
#X obj 36 24 loadbang;
#X obj 36 372 outlet~;
#X obj 36 96 soundfiler;
#X msg 36 60 read -resize bell.aiff \$0-table;
#N canvas 0 22 500 350 \$0-table 0;
#X array \$0-table 155944 float 2;
#X coords 0 1 155944 -1 250 175 1 0 0;
#X restore 360 36 graph \$0-table;
#X obj 36 132 t f f;
#X obj 108 216 phasor~;
#X obj 36 264 *~;
#X obj 108 180 expr 44100/$f1;
#X obj 36 336 tabread4~ \$0-table;
#X connect 0 0 10 0;
#X connect 1 0 4 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 6 0 9 0;
#X connect 6 1 8 1;
#X connect 7 0 8 0;
#X connect 8 0 0 0;
#X connect 9 0 7 0;
#X connect 10 0 2 0;
#X coords 0 0 1 1 250 175 0 0 0;
#X restore 156 24 pd play;
#X connect 0 0 6 0;
#X connect 1 0 6 0;
#X connect 2 0 7 0;
#X connect 3 0 8 0;
#X connect 4 0 9 0;
#X connect 6 0 5 0;
#X connect 7 0 0 0;
#X connect 8 0 1 1;
#X connect 9 0 0 1;
#X connect 10 0 1 0;
#X coords 0 0 1 1 250 175 0 0 0;
#X restore 36 336 pd signal;
#X obj 120 276 nbx 5 40 0 100 0 0 empty \$0-signal empty 0 -7 0 10 #ffffff #000000 #000000 0 100;
#X obj 36 240 nbx 5 40 0 100 0 0 empty \$0-noise empty 0 -7 0 10 #ffffff #000000 #000000 0 100;
#X obj 84 372 tgl 15 0 empty \$0-apply empty 17 7 0 10 #ffffff #000000 #000000 0 15;
#X obj 108 372 bng 15 250 50 0 empty \$0-compute empty 17 7 0 10 #ffffff #000000 #000000;
#N canvas 0 22 500 350 \$0-mask 0;
#X array \$0-mask 512 float 2;
#X coords 0 128 512 0 250 175 1 0 0;
#X restore 300 360 graph \$0-mask;
#X obj 36 144 qlist denoiser.txt;
#X msg 36 108 rewind \, bang;
#X obj 300 108 r #;
#X obj 300 144 print;
#X connect 7 0 0 0;
#X connect 8 0 7 0;
#X connect 9 0 8 1;
#X connect 10 0 8 0;
#X connect 11 0 7 1;
#X connect 12 0 7 2;
#X connect 15 0 14 0;
#X connect 16 0 17 0;
#X coords 0 0 1 1 250 175 0 0 0;
