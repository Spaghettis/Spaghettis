#N canvas 284 208 478 330 12;
#X obj 36 240 output;
#X obj 36 168 mtof;
#N canvas 394 63 825 149 more 0;
#X text 12 12 The subpatch contains a phasor~ object locally upsampled by a factor of sixteen.;
#X f 80;
#X text 12 36 Without upsampling \, partials as low as '24' kHz fold back over into the audible range.;
#X f 86;
#X text 12 60 With upsampling \, the first audibly folding over partial is at almost 700 kHz \, 29 times higher.;
#X f 94;
#X text 12 84 A Butterworth filter is used to avoid the signal to fold over as it gets downsampled.;
#X f 85;
#X text 12 108 Here \, the filter is set for a cutoff of '15' kHz.;
#X coords 0 0 1 1 250 175 0 0 0;
#X restore 180 204 pd more;
#X obj 12 12 cnv 15 250 45 empty empty empty 0 -7 0 10 #cccccc #000000;
#X obj -60 12 freeze;
#X text 24 24 oversampling;
#X text 12 72 Upsampling to control foldover.;
#X obj 36 108 nbx 5 40 0 127 0 0 empty empty empty 0 -7 0 10 #ffffff #000000 #000000 72 127;
#N canvas 387 101 401 214 upsample 0;
#X obj 36 72 phasor~;
#X obj 216 156 block~ 1024 1 16;
#X obj 36 24 inlet;
#X obj 36 156 outlet~;
#N canvas 237 115 267 417 butterworth 0;
#X obj 36 252 *~ 0.125;
#X obj 36 276 rzero~ -1;
#X obj 36 300 rzero~ -1;
#X obj 36 324 rzero~ -1;
#X obj 36 96 rpole~ 0.87467;
#X obj 36 72 *~ 0.12532;
#X obj 36 120 *~ 0.01668;
#X obj 36 156 cpole~ 0.9293 0.10812;
#X obj 36 216 cpole~ 0.9293 -0.10812;
#X obj 36 24 inlet~;
#X obj 36 360 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 10 0;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 7 1 8 1;
#X connect 8 0 0 0;
#X connect 9 0 5 0;
#X coords 0 0 1 1 250 175 0 0 0;
#X restore 36 108 pd butterworth;
#X connect 0 0 4 0;
#X connect 2 0 0 0;
#X connect 4 0 3 0;
#X coords 0 0 1 1 250 175 0 0 0;
#X restore 36 204 pd upsample;
#N canvas 549 70 761 418 again 0;
#X obj 36 180 buttercoef3;
#X f 11;
#X obj 36 144 / 16;
#X obj 36 108 / 22050;
#X msg 36 72 15000;
#X text 12 12 How to calculate the filter coefficients.;
#X text 12 36 Note that Nyquist frequency is ('22050' * '16') because of the 16-times oversampling.;
#X f 85;
#X floatatom 180 360 0 0 0 1 - - -;
#X floatatom 180 336 0 0 0 1 - - -;
#X floatatom 180 312 0 0 0 1 - - -;
#X floatatom 180 264 0 0 0 1 - - -;
#X floatatom 180 288 0 0 0 1 - - -;
#X floatatom 180 240 0 0 0 1 - - -;
#X connect 0 0 11 0;
#X connect 0 1 10 0;
#X connect 0 2 9 0;
#X connect 0 3 8 0;
#X connect 0 4 7 0;
#X connect 0 5 6 0;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X coords 0 0 1 1 250 175 0 0 0;
#X restore 180 228 pd again;
#X connect 1 0 8 0;
#X connect 7 0 1 0;
#X connect 8 0 0 0;
#X coords 0 0 1 1 250 175 0 0 0;
