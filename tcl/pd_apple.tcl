
# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

# Copyright (c) 1997-2015 Miller Puckette and others ( https://opensource.org/licenses/BSD-3-Clause ).

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

# Override methods specific to Mac OS X application.

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

package provide pd_apple 0.1

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

package require pd_commands
package require pd_connect
package require pd_miscellaneous

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

set ::tk::mac::CGAntialiasLimit 0
set ::tk::mac::antialiasedtext  1

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

proc ::tk::mac::ShowPreferences {args} {
    ::pd_connect::pdsend "pd start-path-dialog"
}

proc ::tk::mac::OpenDocument {args} {
    foreach filename $args {
        if {$::var(isInitialized)} {
            ::pd_miscellaneous::open_file $filename
        } else {
            lappend ::var(filesOpenPended) $filename
        }
    }
}

proc ::tk::mac::PrintDocument {args} {
    ::pd_commands::menu_print $::var(windowFocused)
}

proc ::tk::mac::Quit {args} {
    ::pd_connect::pdsend "pd verifyquit"
}

# ------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------
